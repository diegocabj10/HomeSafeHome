<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Notificaciones</title>
</head>
<body ng-app="myApp" ng-controller="myCtrl">

    <button ng-click="Buscar()"> Consultar</button>

    <div>
        <table class="table table-striped table-bordered">
            <tr>
                <th class="text-center">Id Notificacion</th>
                <th class="text-center">Dispositivo</th>
                <th class="text-center">Titulo</th>
                <th class="text-center">Señal</th>
                <th class="text-center">Fecha Notifiación</th>
            </tr>

            <tr ng-repeat="dto in Lista">
                <td class="text-center">{{dto.Id}}</td>
                <td class="text-center">{{dto.NombreDispositivo}}</td>
                <td class="text-center">{{dto.Titulo}}</td>
                <td class="text-center">{{dto.Mensaje}}</td>
                <td class="text-center">{{dto.FechaNotificacion}}</td>

              
            </tr>
        </table>
    </div>

    <span class="label label-default">Registros: {{TotalRegistros}}</span>
    <ul uib-pagination total-items="TotalRegistros" ng-model="paginaActual" max-size="10" class="pagination-sm" boundary-links="true" first-text="Primera" last-text="Ultima" previous-text="Anterior" next-text="Siguiente" rotate="true" ng-change="Buscar()"></ul>




    <link href="bootstrap.min.css" rel="stylesheet" />
    <script src="jquery-1.10.2.js"></script>
    <script src="angular.js"></script>
    <script src="bootstrap.min.js"></script>
    <script src="ui-bootstrap-custom-tpls-2.5.0.min.js"></script>

    <script>
        myApp = angular.module('myApp', ['ui.bootstrap']);
        myApp.controller('myCtrl', function ($scope, $http, $interval) {
            $scope.paginaActual = 1;
            $scope.Buscar = function () {
                //$interval(function () {
               
                $http.get('api/notificaciones', { params: { numeroPagina: $scope.paginaActual, idUsuario: 1 } })
                        .then(
                            function (successResponse) {
                                $scope.Lista = successResponse.data.Lista;
                                $scope.TotalRegistros = successResponse.data.TotalRegistrosListado;
                            }
                        );
                //}, 1000, 100
                //);
            };




        })

    </script>

</body>
</html>